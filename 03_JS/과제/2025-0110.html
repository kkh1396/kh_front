<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .outprint {
            border: 1px solid;
            width: 100%;
            height: 50px;
        }
    </style>

</head>

<body>


    <h3>Practice1</h3>

    <fieldset>
        <legend>취미</legend>

        <div class="allbox" name="allbox">
            <input type="checkbox" name="check" value="전체선택" id="allck" onchange="allcheck()">
            <label for="allck">전체선택</label>

        </div>

        <div class="subbox" name="subbox">

            <input type="checkbox" name="check" value="종합" id="jonghab" onchange="checkboxTigger()">
            <label for="jonghab">종합</label>

            <input type="checkbox" name="check" value="소설" id="sosul" onchange="checkboxTigger()" >
            <label for="sosul">소설</label>

            <input type="checkbox" name="check" value="시/에세이" id="si_ese"  onchange="checkboxTigger()" >
            <label for="si_ese">시/에세이</label>

            <input type="checkbox" name="check" value="경제/경영" id="money" onchange="checkboxTigger()">
            <label for="money">경제/경영</label>

            <input type="checkbox" name="check" value="자기계발" id="you"onchange="checkboxTigger()"  >
            <label for="you">자기계발</label>

            <input type="checkbox" name="check" value="아동" id="kid" onchange="checkboxTigger()" >
            <label for="kid">아동</label>

            <br>

            <input type="checkbox" name="check" value="여행" id="trap" onchange="checkboxTigger()" >
            <label for="trap">여행</label>

            <input type="checkbox" name="check" value="과학" id="sient" onchange="checkboxTigger()" >
            <label for="sient">과학</label>

            <input type="checkbox" name="check" value="역사/문화" id="history" onchange="checkboxTigger()" >
            <label for="history">역사/문화</label>

            <input type="checkbox" name="check" value="외국어" id="lang" onchange="checkboxTigger()" >
            <label for="lang">외국어</label>

            <input type="checkbox" name="check" value="컴퓨터" id="PC" onchange="checkboxTigger()" >
            <label for="PC">컴퓨터</label>

            <input type="checkbox" name="check" value="만화" id="catoon" onchange="checkboxTigger()" >
            <label for="catoon">만화</label>

        </div>



    </fieldset>

    <!-- <button onclick="output()" onclick="selectCategory()">카테고리 선택</button> <br> -->
    <button onclick="selectCategory()">카테고리 선택</button> <br>
    <p id="outprint" class="outprint"> </p>

    <script>

/*
        function chch() {

            let all = document.getElementById('allck');
            let ch_list = document.getElementsByName('check');

            for (let i = 0; i < 13; i++) {

                ch_list[i].checked = all.checked;

            };



        }

        function subch() {
            let check1 = true;

            let ch_list = document.getElementsByName('check');

            for (let chlist of ch_list) {


                if (chlist.value == "all") {
                    continue;
                }

                if (chlist.checked == false) {
                    check1 = false;

                };
            };

            document.getElementById('allck').checked = check1;



        }


        function output() {

            let outP = document.getElementById('outprint');
            let ch_list = document.getElementsByName('check');
            outP.innerText = "";

            for (clist of ch_list) {

                if (clist.checked == true) {

                    if (outP.innerText !== "") {
                        outP.innerText += ", ";
                    }
                    outP.innerText += clist.value;
                }
            }

            if (outP.innerText !== "") {
                outP.innerText += " 입니다.";
            } else {
                outP.innerText = "미선택";
            }

        }

*/


        /*
        
        전체 선택 체크박스의 상태가 변경될 때
        나머지 체크박스의 상태 변경
        * 전체 선택 [] 상태가 체크된 상태 => 나머지도 체크 상태
                                           체크해제된 상태 => 나머지도 체크 해제
        */

        function allcheck() {
            //전체선택 체크박스 요소 접근 -> id 속성 사용
            const alcheck = document.getElementById('allck');
            //alcheck.checked; // 해당 요소의 체크 상태 *(true/false)

            // 나머지 체크박스 요소들에 접근 -> name 속성 사용
            const hlist = document.getElementsByName('check')
            // => qoduf gudxofh dufj rodml dyth wjdqhfmf wjwkd

            for (let h of hlist) {

                h.checked = alcheck.checked;
                // name 속성이 hobby인 요소(h)의 체크 상태(checked)를
                // 전체 선택 요소의 체크 상태와 동일하게 변경
                // 동일하게 변경
            }
        }
        /*
          체크 상태가 변경될 때
          전체선택 체크박스를 제외한
          모든 체크박스들이 체크된 경우 => 전체선택 체크박스를 체크상태로 변경
          하나라도 체크 해제된 체크박스가 있는 경우 => 전체선택 체크박스를 체크 해제 상태로 변경
        */

        function checkboxTigger() {

            let isCheked = true;
            // 나머지 체크박스 요소들에 접근 -> name 속성 사용
            const hlist = document.getElementsByName('check')

            for (let h of hlist) {
                if (h.value == "전체선택") {
                    continue;
                }


                if (h.checked == false) {
                    isCheked = false;
                    break;
                }
            }

            //전체선택 체크박스의 상태 변경
            document.getElementById('allck').checked = isCheked

        }




        /* 
          [카테고리 선택] 버튼이 클릭되었을 때
          체크된 상태의 취미 정보를 빨간 테두리 영역 안에
          공백으로 구분하여 출력
        */

        function selectCategory() {
            // 체크 박스 요소들에 접근 -> name 속성 사용
            const hlist = document.getElementsByName('check')

            let result = ""; //체크된 항목의 값을 저장할 변수

            for(let h of hlist) {
                //전체 선택인 경우 넘어가도록 처리
                if (h.value == "전체선택") {
                    continue;
                }

                // 체크가 된 상태인 경우 값을 result 변수에 저장
                if (h.checked) // h.checked == true
                   result = result + " " + h.value;
            }

            //결과 출력
            document.getElementById('outprint').innerText = result;

        }




    </script>
</body>

</html>